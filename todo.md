# Screen Recording Tutorial Generator - TODO

## Phase 1: プロジェクト計画とtodo.md作成
- [x] プロジェクト初期化
- [x] todo.md作成

## Phase 2: データベーススキーマとバックエンド基盤の構築
- [x] データベーススキーマ設計（projects, frames, steps テーブル）
- [x] S3ストレージ連携設定
- [x] tRPCルーター基本構造の実装

## Phase 3: 動画アップロードとフレーム抽出エンジンの実装
- [x] 動画ファイルアップロードAPI実装
- [x] OpenCV環境のセットアップ
- [x] 動画からフレーム抽出スクリプト実装
- [x] フレーム間差分検知アルゴリズム実装
- [x] キーフレーム自動検出ロジック実装
- [x] 抽出フレームのS3保存機能

## Phase 4: AI画像解析とステップ構造化機能の実装
- [x] LLM統合（画像解析用）
- [x] 画像からステップ情報抽出ロジック
- [x] JSON構造化処理
- [x] ステップデータのDB保存

## Phase 5: フロントエンドUIの実装（アップロード・一覧・編集）
- [x] デザインスタイル決定とテーマ設定
- [x] ダッシュボードレイアウト構築
- [x] 動画アップロードページ実装
- [x] プロジェクト一覧ページ実装
- [x] フレーム一覧表示UI実装
- [x] ステップ編集UI実装（テキスト修正・並べ替え・画像差し替え）

## Phase 6: スライド生成機能の実装
- [x] PowerPoint生成ライブラリ選定とインストール
- [x] スライドテンプレート設計
- [x] ステップデータからPPTX生成ロジック実装
- [x] スライドダウンロード機能

## Phase 7: 音声合成と動画生成機能の実装
- [x] TTS（テキスト読み上げ）API統合
- [x] ナレーション音声生成機能
- [x] FFmpeg環境セットアップ
- [x] 静止画と音声の動画合成ロジック実装
- [x] 最終動画（MP4）出力機能

## Phase 8: 統合テストとチェックポイント作成
- [x] エンドツーエンドテスト実施
- [x] Vitestユニットテスト作成
- [x] バグ修正
- [x] チェックポイント作成

## Phase 9: 開発成果の提示とデモンストレーション
- [x] デモ動画準備
- [x] ユーザーへの成果物提示
- [x] 次ステップの提案

## Phase 10: 動画アップロード機能の完全実装
- [x] フロントエンドの動画アップロードUI実装
- [x] ファイルサイズ制限とバリデーション
- [x] アップロード進捗表示
- [x] バックエンドのマルチパートファイル受信実装
- [x] S3へのファイルアップロード処理
- [x] 動画処理のバックグラウンド実行

## Phase 11: スライドと動画生成機能のUI統合
- [x] プロジェクト詳細ページにスライド生成ボタン追加
- [x] プロジェクト詳細ページに動画生成ボタン追加
- [x] 生成中のローディング状態表示
- [x] 生成完了後のダウンロードリンク表示

## Phase 12: 最終テストとチェックポイント
- [x] エンドツーエンドテスト実施
- [x] バグ修正
- [x] 最終チェックポイント作成

## バグ修正: ログイン後にトップページにリダイレクトされる問題
- [x] 認証フローの問題調査
- [x] DashboardLayoutコンポーネントの認証チェック修正
- [x] ルーティングロジックの修正
- [x] 修正のテストと動作確認

## バグ修正: DashboardLayoutメニュー項目の再修正（GitHub同期後）
- [x] DashboardLayout.tsxのmenuItems配列を修正
- [x] 不要なメニュー項目（Page 1, Page 2）を削除
- [x] プロジェクト一覧へのナビゲーションを実装
- [x] ブラウザでの動作確認
- [x] チェックポイント作成とGitHubへのプッシュ

## バグ修正: 動画アップロード機能のサーバーサイド実装完成
- [x] NewProject.tsxの実装を確認
- [x] ファイルアップロードのフロントエンド処理を実装
- [x] バックエンドのファイル受信処理を実装
- [x] S3へのアップロードとDB保存処理を実装
- [x] 動画処理パイプラインの実行
- [x] エラーハンドリングとユーザーフィードバック
- [x] 実際の動画ファイルでテスト

## GitHubマージコンフリクト解決
- [x] GitHubの変更をマージ
- [x] 500MB制限を維持
- [x] ファイル形式チェックを追加
- [x] GitHubの実装スタイルを採用（videoBase64/fileName/contentType）
- [x] 開発サーバー再起動
- [x] チェックポイント作成

## サーバーサイドロジックの単体テスト
- [x] テスト用動画のダウンロードまたは生成
- [x] フレーム抽出スクリプトの実行テスト
- [x] AI解析とステップ生成のテスト
- [x] スライド生成ロジックのテスト
- [x] 生成されたファイルの検証
- [x] 問題点の特定と修正
- [x] テスト結果レポート作成

## サーバーサイドロジック単体テスト完了

すべてのテストが成功しました：
- ✅ フレーム抽出: 正常動作
- ✅ AI解析: 正常動作
- ✅ スライド生成: 正常動作
- ✅ リクエストボディサイズ制限: 50MBに設定済み

詳細は `test_results_report.md` を参照してください。

## 動画処理の進捗状況リアルタイム表示機能

- [x] データベーススキーマに進捗状況フィールドを追加（processingProgress, processingMessage）
- [x] サーバーサイドの進捗管理機能を実装（updateProjectProgress関数）
- [x] videoProcessor.tsで各処理ステップごとに進捗を更新
- [x] stepGenerator.tsでAI解析ステップごとに進捗を更新
- [x] tRPCエンドポイントで進捗取得API（getProgress）を追加
- [x] フロントエンドに進捗表示UI（プログレスバー、ステータスメッセージ）を実装
- [x] ポーリング機能を実装（1秒間隔、処理完了時に自動停止）
- [x] 動作確認とテスト（progress.test.tsで全テスト成功）
