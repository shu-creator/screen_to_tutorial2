# TutorialGen - 画面録画から説明動画を自動生成

操作動画をアップロードするだけで、AIが自動で手順を解析し、スライドと音声付きの解説動画を数分で作成できるWebアプリケーションです。

## 主な機能

### 1. 動画アップロードとフレーム抽出
- MP4/MOV形式の画面録画をアップロード
- OpenCVによるフレーム間差分検知
- 重要な操作手順を自動でキーフレームとして抽出

### 2. AI画像解析とステップ構造化
- LLM（GPT-4o）による画像解析
- 各フレームから以下の情報を自動生成：
  - ステップタイトル
  - 操作説明
  - 詳細な説明
  - 音声ナレーション原稿

### 3. ステップ編集機能
- 抽出されたステップのテキスト編集
- ステップの並べ替え
- ステップの削除

### 4. スライド生成
- PowerPoint（PPTX）形式でスライドを自動生成
- 各スライドには以下が含まれます：
  - ステップ番号とタイトル
  - 操作画面のスクリーンショット
  - 操作説明と詳細説明
  - スピーカーノート（ナレーション原稿）

### 5. 音声合成と動画生成
- テキスト読み上げ（TTS）による音声生成
- FFmpegによる静止画と音声の合成
- 最終的な解説動画（MP4）の出力

## 技術スタック

### フロントエンド
- React 19
- Tailwind CSS 4
- shadcn/ui
- tRPC
- Wouter（ルーティング）

### バックエンド
- Node.js + Express
- tRPC 11
- Drizzle ORM
- MySQL/TiDB

### 画像・動画処理
- OpenCV（Python）
- FFmpeg
- PptxGenJS

### AI・機械学習
- GPT-4o（画像解析）
- Manus LLM統合

### インフラ
- S3（ファイルストレージ）
- Manus OAuth（認証）

## プロジェクト構造

```
screen_to_tutorial/
├── client/                 # フロントエンドコード
│   ├── src/
│   │   ├── pages/         # ページコンポーネント
│   │   ├── components/    # 再利用可能なUIコンポーネント
│   │   └── lib/           # tRPCクライアント等
├── server/                # バックエンドコード
│   ├── routers.ts         # tRPCルーター
│   ├── db.ts              # データベースクエリヘルパー
│   ├── videoProcessor.ts  # 動画処理エンジン
│   ├── stepGenerator.ts   # AIステップ生成
│   ├── slideGenerator.ts  # スライド生成
│   └── videoGenerator.ts  # 動画・音声生成
├── drizzle/               # データベーススキーマ
│   └── schema.ts
├── scripts/               # Pythonスクリプト
│   └── extract_frames.py  # フレーム抽出スクリプト
└── todo.md                # 開発タスク管理
```

## データベーススキーマ

### users
ユーザー情報を管理

### projects
動画処理プロジェクトを管理
- タイトル、説明
- 動画URL、ステータス

### frames
抽出されたキーフレームを管理
- フレーム番号、タイムスタンプ
- 画像URL、差分スコア

### steps
AI生成されたステップ情報を管理
- タイトル、操作、説明、ナレーション
- 音声URL

## 開発状況

現在の実装状況については、`todo.md`を参照してください。

## 使用方法

### 1. プロジェクト作成
1. ダッシュボードから「新規プロジェクト」をクリック
2. タイトルと説明を入力
3. 動画ファイル（MP4/MOV）をアップロード

### 2. 動画処理
1. アップロード完了後、自動でフレーム抽出が開始されます
2. 処理が完了すると、「フレーム」タブに抽出された画像が表示されます

### 3. ステップ生成
1. 「ステップ」タブに移動
2. 「AIでステップを生成」ボタンをクリック
3. AIが各フレームを解析し、ステップ情報を自動生成します

### 4. 編集
1. 生成されたステップの「編集」ボタンをクリック
2. タイトル、操作、説明、ナレーションを修正できます
3. 不要なステップは「削除」ボタンで削除できます

### 5. エクスポート
- **スライド**: 「スライドをダウンロード」ボタンでPPTXファイルをダウンロード
- **動画**: 「動画をダウンロード」ボタンで音声付き解説動画（MP4）をダウンロード

## 注意事項

### 動画アップロード機能について
現在、フロントエンドからの動画アップロード機能は開発中です。実際の実装では、以下の手順が必要です：

1. クライアント側でファイルをBase64エンコードまたはマルチパート形式で送信
2. サーバー側でファイルを受け取り、S3にアップロード
3. アップロードされたURLをデータベースに保存
4. バックグラウンドで動画処理を開始

### TTS（音声合成）について
現在の実装では、プレースホルダーとして無音の音声ファイルを生成しています。実際の音声合成を行うには、以下のいずれかのサービスを統合する必要があります：

- Google Cloud Text-to-Speech
- Amazon Polly
- Microsoft Azure Speech Services
- OpenAI TTS API

### パフォーマンスについて
- 動画処理は時間がかかる場合があります（動画の長さに依存）
- AI解析は各フレームごとに実行されるため、フレーム数が多いと処理時間が長くなります
- バックグラウンド処理を使用しているため、処理中も他の操作が可能です

## 今後の改善点

1. **動画アップロード機能の完全実装**
   - マルチパートアップロード対応
   - アップロード進捗表示
   - ファイルサイズ制限の実装

2. **TTS統合**
   - 実際の音声合成サービスとの統合
   - 音声の品質・速度設定

3. **ステップの並べ替え機能**
   - ドラッグ&ドロップによる並べ替え
   - sortOrderの自動更新

4. **画像の差し替え機能**
   - 手動で画像をアップロードして差し替え
   - フレームの再抽出

5. **プレビュー機能**
   - スライドのプレビュー表示
   - 動画のプレビュー再生

6. **エクスポート設定**
   - スライドテンプレートの選択
   - 動画解像度・フォーマットの設定

7. **バッチ処理**
   - 複数の動画を一括処理
   - プロジェクトのテンプレート化

## ライセンス

MIT
